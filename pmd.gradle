apply plugin: 'pmd'
pmdMain {
    source ='src/main/java'
    reports {
        xml.enabled = false
        html.enabled = true
    }
    /*excluding original osis stub code from PMD scan*/
    exclude '**/com/vmware/osis/resource/*.java',
            "**/com/vmware/osis/resource/*.*",
            "**/com/vmware/osis/model/**/*.*",
            "**/com/vmware/osis/annotation/*.*",
            "**/com/vmware/osis/security/**/*.*",
            "**/com/vmware/osis/service/*.*",
            "**/com/vmware/osis/validation/*.*",

            /*Temporarily adding below packages into exclusion. Needs to be removed*/
            "**/com/vmware/osis/platform/**/*.*"
            "**/com/vmware/osis/platform/*.*"
}
pmdTest {
    source ='src/test/java'
    reports {
        xml.enabled = false
        html.enabled = true
    }
}

pmd {
    consoleOutput = true
    toolVersion = "6.21.0"
    rulePriority = 4
    ignoreFailures = false
    reportsDir = file("$rootDir/reports/pmd-lint")
    ruleSetFiles = files("$rootDir/pmd-rules.xml")
    ruleSets = []
}
